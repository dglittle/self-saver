<html>
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, user-scalable=no">
</head>
<body>
<script src="http://code.jquery.com/jquery-1.11.0.min.js"></script>
<script src='https://cdn.firebase.com/js/client/2.0.4/firebase.js'></script>
<script src="http://dglittle.github.io/gl519/index.js"></script>
<script src="http://dglittle.github.io/gl519/aes.js"></script>
<script>

$(function () {
    console.log('version 1')
    
    $('body').css('margin', '0px')
    D = drawGameDiv(100/125, .07)
    $('body').append(D)
    D.css('background-color', 'green')
    
    D.append($('<div/>').text('hello! we'))
    
    
    //var a = Base64.encode('Q')
    var a = 'Q\u2665'
    console.log('hi1: ' + a + a.charCodeAt(1))
    a = Base64.encode(Utf8.encode(a))
    console.log('hi2: ' + a)
    var b = Utf8.decode(Base64.decode(a))
    console.log('hi3: \u2665 we ' + b)
})

//////////////////////////////////////////////////////////
//////////////////////////////////////////////////////////
//////////////////////////////////////////////////////////

function get() {
    var a = arguments
    var x = a[0]
    for (var i = 1; x && i < a.length; i++) x = x[a[i]]
    return x
}

$.fn.transform = function (s) {
    this.css({
        '-ms-transform' : s,
        '-moz-transform' : s,
        '-webkit-transform' : s,
        '-o-transform' : s
    })
    return this
}

function toColor(a) {
    return 'rgb(' + _.map(a, function (x) { return Math.floor(x) }).join(',') + ')'
}

function randomColors() {
    var colors = []

    var a = [255, 128, _.lerp(0, 128, 1, 255, Math.random())]
    _.shuffle(a)
    colors.push(toColor(a))
    
    a = _.map(a, function (x) { return _.lerp(0, x, 1, 0, 1/4) })
    colors.push(toColor(a))
    
    a = _.map(a, function (x) { return _.lerp(0, x, 1, 0, 1/3) })
    colors.push(toColor(a))
    
    a = _.map(a, function (x) { return _.lerp(0, x, 1, 0, 1/2) })
    colors.push(toColor(a))
    
    return colors
}

function drawGameDiv(widthOverHeight, fontSize) {
    var w1 = window.innerWidth
    var h1 = window.innerHeight
    if (w1/h1 > widthOverHeight) {
        var h = h1
        var w = widthOverHeight * h
    } else {
        var w = w1
        var h = w / widthOverHeight
    }

    var d = $('<div/>').css({
        position : 'absolute',
        left : '50%',
        top : '50%',
        width : w + 'px',
        height : h + 'px',
        margin : '-' + (h/2) + 'px 0 0 -' + (w/2) + 'px',
        fontSize : fontSize * w + 'px'
    })

    $.fn.setPos = function (x, y, _w, _h) {
        return this.css({
            position : 'absolute',
            left : x * w + 'px',
            top : y * h + 'px',
            width : _w * w + 'px',
            height : _h * h + 'px'
        })
    }

    return d
}

</script>
</body>
</html>
