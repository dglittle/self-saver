<html>
<head>
<meta name="viewport" content="width=device-width, user-scalable=no">
</head>
<body>
<script src="http://code.jquery.com/jquery-1.11.0.min.js"></script>
<script src="http://dglittle.github.io/gl519/index.js"></script>
<script>

$(function () {
    $('body').css('margin', '0px')
    
    var g = drawGameDiv(100/125, .07)
    $('body').append(g)

    $('body').css('background-color', 'black')
    
    var questions = [
        'do you like this?',
        'can you lift a car?',
        'do you like Her?',
        'are you the kind of person who writes really long questions to try to break the system?',
        'have you watched a movie this week?',
        'can you haz cheezburger?'
    ]
    
    _.each(questions, function (q, i) {
        var cs = randomColors()
        var margin = .2
        var x = margin/100
        var y = i * 1/6 + margin/125
        var h = 1/6 - 2*margin/125
        var d = $('<div style="background-color:' + cs[0] + '"/>').setPos(x, y, .6 - 2*margin/100, h)

        var t = $('<div/>').css('width', d.css('width'))
        t.text(q)
        g.append(t)
        var per = 100
        while (t.height() > d.height()) {
            per -= 10
            t.css('font-size', per + '%')
        }
        d.append(t)
        
        g.append(d)
        
        d = $('<div style="background-color:' + cs[1] + '"/>').setPos(.6 + margin/100, y, .4/3 - 2*margin/100, h)
        d.text('yes').css('font-size', '60%')
        rotate(d, 'rotate(5deg)')
        g.append(d)
        
        d = $('<div style="background-color:' + cs[2] + '"/>').setPos(.6 + .4/3 + margin/100, y, .4/3 - 2*margin/100, h)
        d.text('no').css('font-size', '60%')
        rotate(d, 'rotate(10deg)')
        g.append(d)
        
        d = $('<div style="background-color:' + cs[3] + '"/>').setPos(.6 + .4/3*2 + margin/100, y, .4/3 - 2*margin/100, h)
        d.text('skip').css('font-size', '60%')
        rotate(d, 'rotate(20deg)')
        g.append(d)
    })


    return
    
    g.text('hi?')
    
    g.append($('<div/>').css({
        backgroundColor : 'blue'
    }).text('hi!').setPos(.1, .1, .5, .5))

})

function rotate(me, s) {
    me.css({
        '-ms-transform' : s,
        '-moz-transform' : s,
        '-webkit-transform' : s,
        '-o-transform' : s
    })
    return me
}

function toColor(a) {
    return 'rgb(' + _.map(a, function (x) { return Math.floor(x) }).join(',') + ')'
}

function randomColors() {
    var colors = []

    var a = [255, 128, _.lerp(0, 128, 1, 255, Math.random())]
    _.shuffle(a)
    colors.push(toColor(a))
    
    a = _.map(a, function (x) { return _.lerp(0, x, 1, 0, 1/4) })
    colors.push(toColor(a))
    
    a = _.map(a, function (x) { return _.lerp(0, x, 1, 0, 1/3) })
    colors.push(toColor(a))
    
    a = _.map(a, function (x) { return _.lerp(0, x, 1, 0, 1/2) })
    colors.push(toColor(a))
    
    return colors
}

function drawGameDiv(widthOverHeight, fontSize) {
    var w1 = window.innerWidth
    var h1 = window.innerHeight
    if (w1/h1 > widthOverHeight) {
        var h = h1
        var w = widthOverHeight * h
    } else {
        var w = w1
        var h = w / widthOverHeight
    }

    var d = $('<div/>').css({
        position : 'absolute',
        left : '50%',
        top : '50%',
        width : w + 'px',
        height : h + 'px',
        margin : '-' + (h/2) + 'px 0 0 -' + (w/2) + 'px',
        fontSize : fontSize * w + 'px'
    })

    $.fn.setPos = function (x, y, _w, _h) {
        return this.css({
            position : 'absolute',
            left : x * w + 'px',
            top : y * h + 'px',
            width : _w * w + 'px',
            height : _h * h + 'px'
        })
    }

    return d
}

</script>
</body>
</html>
